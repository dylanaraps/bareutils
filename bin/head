#!/usr/bin/env bash
#
# head in pure bash.

max_lines=10

while getopts ":n:" opt; do
    case $opt in
        n) max_lines="$OPTARG" ;;

        :)
            printf '%s\n' "option -$OPTARG requires an argument." >&2
            exit 1
        ;;

        ?)
            printf '%s\n' "error: -$OPTARG not a valid option." >&2
            exit 1
        ;;
    esac

    shift "$((OPTIND - 1))"
done

[[ ! -f $1 ]] && {
    printf '%s\n' "head: ${1:-null}: No such file or directory." >&2
    exit 1
}

mapfile file_data < "$1"
[[ ${max_lines##-*} || $((max_lines += ${#file_data[@]})) ]]
printf '%s' "${file_data[@]0:max_lines}"
